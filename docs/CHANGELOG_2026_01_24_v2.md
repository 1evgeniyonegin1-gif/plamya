# CHANGELOG ‚Äî 24 —è–Ω–≤–∞—Ä—è 2026 (–≤–µ—Ä—Å–∏—è 2)

## –û–±–∑–æ—Ä –∏–∑–º–µ–Ω–µ–Ω–∏–π

–ú–∞—Å—à—Ç–∞–±–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∫–æ–Ω—Ç–µ–Ω—Ç–∞ –∏ –æ–Ω–±–æ—Ä–¥–∏–Ω–≥–∞:
- –ò—Å–ø—Ä–∞–≤–ª–µ–Ω—ã —Ñ–æ—Ç–æ –ø—Ä–æ–¥—É–∫—Ç–æ–≤
- –£—Å—Ç—Ä–∞–Ω–µ–Ω–æ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ —Ç–µ–∫—Å—Ç–∞ –≤ –ø–æ—Å—Ç–∞—Ö
- –ü–µ—Ä–µ–ø–∏—Å–∞–Ω—ã –ø—Ä–æ–º–ø—Ç—ã –¥–ª—è –∂–∏–≤–æ–≥–æ –∫–æ–Ω—Ç–µ–Ω—Ç–∞
- –î–æ–±–∞–≤–ª–µ–Ω–æ —Ä—É—á–Ω–æ–µ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ—Å—Ç–æ–≤
- –°–æ–∑–¥–∞–Ω –ø—Ä–æ–∞–∫—Ç–∏–≤–Ω—ã–π –æ–Ω–±–æ—Ä–¥–∏–Ω–≥ –∫—É—Ä–∞—Ç–æ—Ä–∞

---

## üî¥ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

### 1. –§–æ—Ç–æ –ø—Ä–æ–¥—É–∫—Ç–æ–≤ –Ω–µ –Ω–∞—Ö–æ–¥–∏–ª–∏—Å—å
**–§–∞–π–ª:** `content_manager_bot/utils/product_reference.py`

**–ë—ã–ª–æ:**
```python
self.mapping_file = project_root / "content" / "product_images" / "products_mapping.json"
```

**–°—Ç–∞–ª–æ:**
```python
self.mapping_file = project_root / "content" / "unified_products" / "full_products_mapping.json"
```

**–ß—Ç–æ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å:**
- –ü—É—Ç—å –∫ –º–∞–ø–ø–∏–Ω–≥—É –∏—Å–ø—Ä–∞–≤–ª–µ–Ω –Ω–∞ –∞–∫—Ç—É–∞–ª—å–Ω—ã–π
- –ú–µ—Ç–æ–¥ `extract_product_from_content()` –ø–µ—Ä–µ–ø–∏—Å–∞–Ω –¥–ª—è –Ω–æ–≤–æ–≥–æ —Ñ–æ—Ä–º–∞—Ç–∞ JSON
- –î–æ–±–∞–≤–ª–µ–Ω –º–µ—Ç–æ–¥ `_find_photo_in_folder()` –¥–ª—è –ø–æ–∏—Å–∫–∞ —Ñ–æ—Ç–æ –≤ –ø–∞–ø–∫–∞—Ö

---

### 2. {topic} –∏ {story} –Ω–µ –∑–∞–º–µ–Ω—è–ª–∏—Å—å –≤ hook'–∞—Ö
**–§–∞–π–ª:** `content_manager_bot/ai/content_generator.py`

**–ë—ã–ª–æ:**
```python
persona_context = self.persona_manager.get_persona_context(
    post_type=post_type,
    include_hook=True
    # hook_variables –Ω–µ –ø–µ—Ä–µ–¥–∞–≤–∞–ª–∏—Å—å!
)
```

**–°—Ç–∞–ª–æ:**
```python
hook_variables = {
    "topic": topic_for_hook,
    "story": "–æ–¥–Ω—É –≤–∞–∂–Ω—É—é –∏—Å—Ç–æ—Ä–∏—é",
    "myth": "—Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω—ë–Ω–Ω–æ–µ –∑–∞–±–ª—É–∂–¥–µ–Ω–∏–µ",
    "percentage": str(random.randint(70, 95)),
    # ... –∏ –¥—Ä—É–≥–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
}
persona_context = self.persona_manager.get_persona_context(
    post_type=post_type,
    include_hook=True,
    hook_variables=hook_variables
)
```

**–ß—Ç–æ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å:**
- –í—Å–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –≤ hook'–∞—Ö —Ç–µ–ø–µ—Ä—å –∑–∞–ø–æ–ª–Ω—è—é—Ç—Å—è
- –î–æ–±–∞–≤–ª–µ–Ω –º–µ—Ç–æ–¥ `_get_topic_for_post_type()` –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —Ç–µ–º—ã

---

### 3. –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ —Ç–µ–∫—Å—Ç–∞ –≤ –ø–æ—Å—Ç–∞—Ö
**–§–∞–π–ª:** `content_manager_bot/ai/content_generator.py`

**–ë—ã–ª–æ:** –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–∞—è –≤—Å—Ç–∞–≤–∫–∞ hook –µ—Å–ª–∏ AI –Ω–µ –Ω–∞—á–∞–ª —Å –Ω–µ–≥–æ ‚Üí –¥—É–±–ª–∏

**–°—Ç–∞–ª–æ:** –¢–æ–ª—å–∫–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ, –±–µ–∑ –≤—Å—Ç–∞–≤–∫–∏
```python
# Hook –Ω–µ –≤ –Ω–∞—á–∞–ª–µ - —Ç–æ–ª—å–∫–æ –ª–æ–≥–∏—Ä—É–µ–º, –Ω–µ –≤—Å—Ç–∞–≤–ª—è–µ–º
logger.debug(f"[POST-PROCESSING] Hook –Ω–µ –≤ –Ω–∞—á–∞–ª–µ –ø–æ—Å—Ç–∞: {hook[:50]}...")
```

---

### 4. –ü—Ä–æ–º–ø—Ç—ã —Ç—Ä–µ–±–æ–≤–∞–ª–∏ —Å–ø–∏—Å–∫–∏ –≤–º–µ—Å—Ç–æ –∏—Å—Ç–æ—Ä–∏–π
**–§–∞–π–ª:** `content_manager_bot/ai/prompts.py`

**–ò–∑–º–µ–Ω–µ–Ω—ã:**
- `CONTENT_STYLE_INSTRUCTIONS` ‚Äî –¥–æ–±–∞–≤–ª–µ–Ω—ã –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ —é–º–æ—Ä—É –∏ —Å—Ç–æ—Ä–∏—Ç–µ–ª–ª–∏–Ω–≥—É
- `tips` ‚Äî —Ç–µ–ø–µ—Ä—å —Ç—Ä–µ–±—É–µ—Ç –∏—Å—Ç–æ—Ä–∏—é –≤–º–µ—Å—Ç–æ —Å–ø–∏—Å–∫–∞ "1. 2. 3."
- `motivation` ‚Äî –¥–æ–±–∞–≤–ª–µ–Ω—ã –ø—Ä–∏–º–µ—Ä—ã –∂–∏–≤—ã—Ö –ø–æ—Å—Ç–æ–≤
- `success_story` ‚Äî –ø–µ—Ä–µ–ø–∏—Å–∞–Ω —Å –ø—Ä–∏–º–µ—Ä–∞–º–∏ –¥–∏–∞–ª–æ–≥–æ–≤ –∏ –¥–µ—Ç–∞–ª–µ–π

**–ö–ª—é—á–µ–≤—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ —Å—Ç–∏–ª–µ:**

```
‚ùå –ü–õ–û–•–û (–±—ã–ª–æ):
"5 —Å–æ–≤–µ—Ç–æ–≤ –¥–ª—è —ç–Ω–µ—Ä–≥–∏–∏:
1. –ü–µ–π—Ç–µ –≤–æ–¥—É
2. –°–ø–∏—Ç–µ 8 —á–∞—Å–æ–≤..."

‚úÖ –•–û–†–û–®–û (—Å—Ç–∞–ª–æ):
"–†–∞–Ω—å—à–µ —è –≤–æ–æ–±—â–µ –Ω–µ –ø–æ–Ω–∏–º–∞–ª, –∑–∞—á–µ–º –ø–∏—Ç—å —Å—Ç–æ–ª—å–∫–æ –≤–æ–¥—ã.
–ê –ø–æ—Ç–æ–º –ø–æ–ø—Ä–æ–±–æ–≤–∞–ª –º–µ—Å—è—Ü –ø–∏—Ç—å –ø–æ 2 –ª–∏—Ç—Ä–∞.
–†–µ–∞–ª—å–Ω–æ ‚Äî –∫–æ–∂–∞ –ª—É—á—à–µ, —ç–Ω–µ—Ä–≥–∏–∏ –±–æ–ª—å—à–µ."
```

---

## üÜï –ù–æ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏

### 5. –†—É—á–Ω–æ–µ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ—Å—Ç–æ–≤
**–§–∞–π–ª—ã:**
- `content_manager_bot/utils/keyboards.py`
- `content_manager_bot/handlers/callbacks.py`

**–î–æ–±–∞–≤–ª–µ–Ω–æ:**
- –ö–Ω–æ–ø–∫–∞ "‚úèÔ∏è –°–≤–æ–π —Ç–µ–∫—Å—Ç" –≤ –∫–ª–∞–≤–∏–∞—Ç—É—Ä–µ –º–æ–¥–µ—Ä–∞—Ü–∏–∏
- State `waiting_for_manual_edit`
- Handler `manual_edit:` –¥–ª—è —Ä—É—á–Ω–æ–≥–æ –≤–≤–æ–¥–∞ —Ç–µ–∫—Å—Ç–∞

**–ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç:**
1. –ê–¥–º–∏–Ω –Ω–∞–∂–∏–º–∞–µ—Ç "‚úèÔ∏è –°–≤–æ–π —Ç–µ–∫—Å—Ç"
2. –í–∏–¥–∏—Ç —Ç–µ–∫—É—â–∏–π —Ç–µ–∫—Å—Ç –ø–æ—Å—Ç–∞
3. –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Å–≤–æ–π —Ç–µ–∫—Å—Ç —Ü–µ–ª–∏–∫–æ–º
4. –¢–µ–∫—Å—Ç –∑–∞–º–µ–Ω—è–µ—Ç—Å—è –±–µ–∑ AI-–æ–±—Ä–∞–±–æ—Ç–∫–∏

---

### 6. –ü—Ä–æ–∞–∫—Ç–∏–≤–Ω—ã–π –æ–Ω–±–æ—Ä–¥–∏–Ω–≥ –∫—É—Ä–∞—Ç–æ—Ä–∞
**–ù–æ–≤–∞—è –ø–∞–ø–∫–∞:** `curator_bot/onboarding/`

**–§–∞–π–ª—ã:**
- `__init__.py` ‚Äî —ç–∫—Å–ø–æ—Ä—Ç—ã
- `proactive_tasks.py` ‚Äî —á–µ–∫–ª–∏—Å—Ç—ã –ø–æ –¥–Ω—è–º (7 –¥–Ω–µ–π)
- `onboarding_scheduler.py` ‚Äî –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è

**–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª:**
- 7-–¥–Ω–µ–≤–Ω—ã–π –æ–Ω–±–æ—Ä–¥–∏–Ω–≥ —Å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–º–∏ –∑–∞–¥–∞—á–∞–º–∏
- –ó–∞–¥–∞—á–∏ —Å –ø–æ–¥—Å–∫–∞–∑–∫–∞–º–∏
- –ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è –¥–ª—è –Ω–µ–∞–∫—Ç–∏–≤–Ω—ã—Ö (4—á, 12—á, 24—á, 48—á, 7–¥)
- –ü—Ä–æ–≥—Ä–µ—Å—Å –ø–æ –¥–Ω—è–º

**–ü—Ä–∏–º–µ—Ä –∑–∞–¥–∞—á –Ω–∞ –î–µ–Ω—å 1:**
```
üå± –î–µ–Ω—å 1: –ó–Ω–∞–∫–æ–º—Å—Ç–≤–æ

–¢–≤–æ–∏ –∑–∞–¥–∞—á–∏ –Ω–∞ —Å–µ–≥–æ–¥–Ω—è:
‚¨ú –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –∫–∞—Ç–∞–ª–æ–≥ –ø—Ä–æ–¥—É–∫—Ü–∏–∏ NL (15 –º–∏–Ω)
   üí° –ó–∞–≥–ª—è–Ω–∏ –Ω–∞ nl.ru –∏–ª–∏ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ NL
‚¨ú –í—ã–±—Ä–∞—Ç—å 1 –ø—Ä–æ–¥—É–∫—Ç, –∫–æ—Ç–æ—Ä—ã–π —Ö–æ—á–µ—à—å –ø–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å
   üí° –ù–∞—á–Ω–∏ —Å —Ç–æ–≥–æ, —á—Ç–æ –∞–∫—Ç—É–∞–ª—å–Ω–æ –¥–ª—è —Ç–µ–±—è
‚¨ú –ó–∞–ø–∏—Å–∞—Ç—å —Å–≤–æ—é –≥–ª–∞–≤–Ω—É—é —Ü–µ–ª—å –≤ NL
   üí° –ó–∞—á–µ–º —Ç—ã –∑–¥–µ—Å—å? –ß—Ç–æ —Ö–æ—á–µ—à—å –ø–æ–ª—É—á–∏—Ç—å?
```

---

## üìÅ –ò–∑–º–µ–Ω—ë–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

| –§–∞–π–ª | –ò–∑–º–µ–Ω–µ–Ω–∏—è |
|------|-----------|
| `content_manager_bot/utils/product_reference.py` | –ü—É—Ç—å –∫ –º–∞–ø–ø–∏–Ω–≥—É, –Ω–æ–≤—ã–µ –º–µ—Ç–æ–¥—ã |
| `content_manager_bot/ai/content_generator.py` | hook_variables, —É–±—Ä–∞–Ω–æ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ |
| `content_manager_bot/ai/prompts.py` | –°—Ç–æ—Ä–∏—Ç–µ–ª–ª–∏–Ω–≥, —é–º–æ—Ä, –ø—Ä–∏–º–µ—Ä—ã |
| `content_manager_bot/utils/keyboards.py` | –ö–Ω–æ–ø–∫–∞ "–°–≤–æ–π —Ç–µ–∫—Å—Ç" |
| `content_manager_bot/handlers/callbacks.py` | Handler —Ä—É—á–Ω–æ–≥–æ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è |
| `curator_bot/onboarding/__init__.py` | **–ù–æ–≤—ã–π** |
| `curator_bot/onboarding/proactive_tasks.py` | **–ù–æ–≤—ã–π** |
| `curator_bot/onboarding/onboarding_scheduler.py` | **–ù–æ–≤—ã–π** |

---

## üß™ –ö–∞–∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å

### –¢–µ—Å—Ç 1: –§–æ—Ç–æ –ø—Ä–æ–¥—É–∫—Ç–æ–≤
```
/generate product (–ø—Ä–æ Omega-3)
‚Üí –î–æ–ª–∂–Ω–æ –Ω–∞–π—Ç–∏ —Ñ–æ—Ç–æ –∏–∑ unified_products/omega/omega/photos/
‚Üí –ù–ï –≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å —á–µ—Ä–µ–∑ YandexART
```

### –¢–µ—Å—Ç 2: Hook –±–µ–∑ {topic}
```
/generate tips
‚Üí –ü–æ—Å—Ç –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å –Ω–æ—Ä–º–∞–ª—å–Ω–æ–π —Ñ—Ä–∞–∑—ã
‚Üí –ù–ï "–ü–æ–º–Ω–∏—à—å, –∫–∞–∫ —è –≥–æ–≤–æ—Ä–∏–ª –ø—Ä–æ {topic}?"
```

### –¢–µ—Å—Ç 3: –ñ–∏–≤–æ–π –ø–æ—Å—Ç
```
/generate motivation
‚Üí –ï—Å—Ç—å –∏—Å—Ç–æ—Ä–∏—è, –Ω–µ —Å–ø–∏—Å–æ–∫
‚Üí –ï—Å—Ç—å —é–º–æ—Ä/–∏—Ä–æ–Ω–∏—è
‚Üí –ï—Å—Ç—å **–∂–∏—Ä–Ω—ã–π** –∏ > —Ü–∏—Ç–∞—Ç–∞
```

### –¢–µ—Å—Ç 4: –†—É—á–Ω–æ–µ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
```
1. /generate product
2. –ù–∞–∂–∞—Ç—å "‚úèÔ∏è –°–≤–æ–π —Ç–µ–∫—Å—Ç"
3. –û—Ç–ø—Ä–∞–≤–∏—Ç—å —Å–≤–æ–π —Ç–µ–∫—Å—Ç
‚Üí –¢–µ–∫—Å—Ç –∑–∞–º–µ–Ω–∏–ª—Å—è
```

---

## üìã –ß—Ç–æ –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å –¥–ª—è –¥–µ–ø–ª–æ—è

```bash
# 1. –ù–∞ –ª–æ–∫–∞–ª—å–Ω–æ–π –º–∞—à–∏–Ω–µ
git add .
git commit -m "feat: live content + manual edit + proactive onboarding"
git push

# 2. –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ
ssh root@194.87.86.103
cd /root/nl-international-ai-bots
git pull
systemctl restart nl-bots
journalctl -u nl-bots -f
```

---

## ‚ö†Ô∏è –¢—Ä–µ–±—É–µ—Ç –≤–Ω–∏–º–∞–Ω–∏—è –≤ –±—É–¥—É—â–µ–º

1. **–û–Ω–±–æ—Ä–¥–∏–Ω–≥ –∫—É—Ä–∞—Ç–æ—Ä–∞:** –ü–æ–∫–∞ –∑–∞–≥–ª—É—à–∫–∏ –¥–ª—è –ë–î ‚Äî –Ω—É–∂–Ω–æ –ø—Ä–∏–≤—è–∑–∞—Ç—å –∫ —Ä–µ–∞–ª—å–Ω–æ–π –±–∞–∑–µ
2. **–ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–æ–ø–∏–∫–æ–≤:** –£–±–µ–¥–∏—Ç—å—Å—è —á—Ç–æ –º–∞–ø–ø–∏–Ω–≥ —Ç–∏–ø–æ–≤ –ø–æ—Å—Ç–æ–≤ –≤ —Ç–æ–ø–∏–∫–∏ —Ä–∞–±–æ—Ç–∞–µ—Ç
3. **–ê–≤—Ç–æ–ø–æ—Å—Ç–∏–Ω–≥:** –ß–∞—Å—Ç—å –∫–Ω–æ–ø–æ–∫ /schedule –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç (—Ç—Ä–µ–±—É–µ—Ç –æ—Ç–¥–µ–ª—å–Ω–æ–≥–æ —Ñ–∏–∫—Å–∞)
